(()=>{var e={20:(e,t,n)=>{"use strict";var o=n(609),l=Symbol.for("react.element"),i=(Symbol.for("react.fragment"),Object.prototype.hasOwnProperty),r=o.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,a={key:!0,ref:!0,__self:!0,__source:!0};t.jsx=function(e,t,n){var o,s={},p=null,c=null;for(o in void 0!==n&&(p=""+n),void 0!==t.key&&(p=""+t.key),void 0!==t.ref&&(c=t.ref),t)i.call(t,o)&&!a.hasOwnProperty(o)&&(s[o]=t[o]);if(e&&e.defaultProps)for(o in t=e.defaultProps)void 0===s[o]&&(s[o]=t[o]);return{$$typeof:l,type:e,key:p,ref:c,props:s,_owner:r.current}}},848:(e,t,n)=>{"use strict";e.exports=n(20)},609:e=>{"use strict";e.exports=window.React},942:(e,t)=>{var n;!function(){"use strict";var o={}.hasOwnProperty;function l(){for(var e="",t=0;t<arguments.length;t++){var n=arguments[t];n&&(e=r(e,i(n)))}return e}function i(e){if("string"==typeof e||"number"==typeof e)return e;if("object"!=typeof e)return"";if(Array.isArray(e))return l.apply(null,e);if(e.toString!==Object.prototype.toString&&!e.toString.toString().includes("[native code]"))return e.toString();var t="";for(var n in e)o.call(e,n)&&e[n]&&(t=r(t,n));return t}function r(e,t){return t?e?e+" "+t:e+t:e}e.exports?(l.default=l,e.exports=l):void 0===(n=function(){return l}.apply(t,[]))||(e.exports=n)}()}},t={};function n(o){var l=t[o];if(void 0!==l)return l.exports;var i=t[o]={exports:{}};return e[o](i,i.exports,n),i.exports}n.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return n.d(t,{a:t}),t},n.d=(e,t)=>{for(var o in t)n.o(t,o)&&!n.o(e,o)&&Object.defineProperty(e,o,{enumerable:!0,get:t[o]})},n.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),(()=>{"use strict";var e=n(609);const t=window.wp.compose,o=window.wp.blockEditor,l=window.wp.components,i=window.lodash;var r=n(942),a=n.n(r);const s=window.wp.element,p=window.wp.i18n,c=window.wp.primitives;var u=n(848);const m=(0,u.jsx)(c.SVG,{viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:(0,u.jsx)(c.Path,{d:"M6.5 12.4L12 8l5.5 4.4-.9 1.2L12 10l-4.5 3.6-1-1.2z"})}),d=(0,u.jsx)(c.SVG,{viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:(0,u.jsx)(c.Path,{d:"M17.5 11.6L12 16l-5.5-4.4.9-1.2L12 14l4.5-3.6 1 1.2z"})}),g=(0,u.jsx)(c.SVG,{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",children:(0,u.jsx)(c.Path,{d:"m13.06 12 6.47-6.47-1.06-1.06L12 10.94 5.53 4.47 4.47 5.53 10.94 12l-6.47 6.47 1.06 1.06L12 13.06l6.47 6.47 1.06-1.06L13.06 12Z"})}),_=(0,u.jsx)(c.SVG,{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",children:(0,u.jsx)(c.Path,{d:"M11 12.5V17.5H12.5V12.5H17.5V11H12.5V6H11V11H6V12.5H11Z"})}),w=({conditions:t,updateConditions:n,operators:o,CompareOperators:i,labels:r={},columnOptions:a})=>{const[c,u]=(0,s.useState)([]),w={applyFilters:(0,p.__)("How to Apply Filters","multi-pages-plugin"),matchAll:(0,p.__)("Show items that match all filters","multi-pages-plugin"),matchAny:(0,p.__)("Show items that match any filter","multi-pages-plugin"),emptyFilter:(0,p.__)("Empty filter","multi-pages-plugin"),collapse:(0,p.__)("Collapse","multi-pages-plugin"),expand:(0,p.__)("Expand","multi-pages-plugin"),removeFilter:(0,p.__)("Remove filter","multi-pages-plugin"),column:(0,p.__)("Column","multi-pages-plugin"),selectColumn:(0,p.__)("Select a column...","multi-pages-plugin"),operator:(0,p.__)("Operator","multi-pages-plugin"),value:(0,p.__)("Value","multi-pages-plugin"),addFilter:(0,p.__)("Add filter","multi-pages-plugin"),...r},v=(e,o,l)=>{const i=[...t.conditions];i[e][o]=l,n({...t,conditions:i})},y=e=>{if(!e.column)return w.emptyFilter;let t=`${e.column}`;return e.operator&&(t+=` ${f(e.operator).toLowerCase()}`,i.includes(e.operator)&&e.value&&(t+=` ${e.value}`)),{short:t.length>15?t.substring(0,12)+"...":t,full:t}},f=e=>{const t=o.find((t=>t.value===e));return t?t.label:e};return(0,e.createElement)(e.Fragment,null,(0,e.createElement)(l.SelectControl,{label:w.applyFilters,value:t.logic,options:[{label:w.matchAll,value:"all"},{label:w.matchAny,value:"any"}],onChange:e=>{n({...t,logic:e})}}),t.conditions.map(((r,s)=>(0,e.createElement)("div",{key:s,style:{marginBottom:"10px",padding:"0px 10px",border:"1px solid #ccc"}},(0,e.createElement)("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center"}},(0,e.createElement)("strong",{title:y(r).full},y(r).short),(0,e.createElement)("div",null,(0,e.createElement)(l.IconButton,{icon:c[s]?m:d,label:c[s]?w.collapse:w.expand,onClick:()=>(e=>{u((t=>{const n=[...t];return n[e]=!n[e],n}))})(s)}),(0,e.createElement)(l.IconButton,{icon:g,label:w.removeFilter,onClick:()=>(e=>{const o=[...t.conditions];o.splice(e,1),n({...t,conditions:o})})(s)}))),c[s]&&(0,e.createElement)(e.Fragment,null,a?(0,e.createElement)(l.SelectControl,{label:w.column,value:r.column,options:[{value:"",label:w.selectColumn},...a],onChange:e=>v(s,"column",e)}):(0,e.createElement)(l.TextControl,{label:w.column,value:r.column,onChange:e=>v(s,"column",e)}),(0,e.createElement)(l.SelectControl,{label:w.operator,value:r.operator,options:o,onChange:e=>v(s,"operator",e)}),i.includes(r.operator)&&(0,e.createElement)(l.TextControl,{label:w.value,value:r.value,onChange:e=>v(s,"value",e)}))))),t.conditions.length<10&&(0,e.createElement)(l.Button,{isSecondary:!0,onClick:()=>{if(t.conditions.length<10){const e=t.conditions.length;n({...t,conditions:[...t.conditions,{column:"",operator:o[0].value,value:""}]}),u((t=>{const n=[...t];return n[e]=!0,n}))}},icon:_},w.addFilter))},v=window.wp.hooks,y=window.mpgCondData.operators||[],f=(0,t.createHigherOrderComponent)((t=>n=>{const{attributes:i,setAttributes:r}=n,[a,c]=(0,s.useState)(i.mpgConditions||{conditions:[],logic:"all"}),u=e=>{c(e),r({mpgConditions:e})},m=Object.entries(y).map((([e,t])=>({label:(0,p.__)(t,"multi-pages-plugin"),value:e}))),d=Object.keys(window.mpgCondData.compareOperators)||[];return(0,e.createElement)(s.Fragment,null,(0,e.createElement)(t,{...n}),(0,e.createElement)(o.InspectorControls,null,(0,e.createElement)(l.PanelBody,{title:(0,p.__)("MPG Visibility Conditions","multi-pages-plugin")},(0,e.createElement)(w,{onChange:u,conditions:a,updateConditions:u,operators:m,CompareOperators:d,labels:{addFilter:(0,p.__)("Add Condition","multi-pages-plugin"),applyFilters:(0,p.__)("Show If","multi-pages-plugin"),matchAll:(0,p.__)("All conditions are met","multi-pages-plugin"),matchAny:(0,p.__)("Any condition is met","multi-pages-plugin"),removeFilter:(0,p.__)("Remove Condition","multi-pages-plugin"),filterTitle:(0,p.__)("Condition","multi-pages-plugin"),column:(0,p.__)("Column name","multi-pages-plugin"),operator:(0,p.__)("Condition","multi-pages-plugin"),value:(0,p.__)("Value","multi-pages-plugin")}}))))}),"withConditions"),h=(0,t.createHigherOrderComponent)((t=>n=>{const{attributes:o}=n,l=o.mpgConditions&&o.mpgConditions.conditions&&o.mpgConditions.conditions.length>0;return(0,e.createElement)(t,{...n,className:a()(n.className,{"mpg-has-condition":l}),wrapperProps:{...n.wrapperProps,"data-mpg-label":l?(0,p.__)("MPG Conditioned","multi-pages-plugin"):void 0}})}),"withConditionsIndicator");(0,v.addFilter)("editor.BlockEdit","mpg/conditions-inspector",f,3),(0,v.addFilter)("blocks.registerBlockType","mpg/conditions-register",(e=>(e.attributes=(0,i.assign)(e.attributes,{mpgConditions:{type:"object",default:{conditions:[],logic:"all"},properties:{conditions:{type:"array",items:{type:"object",properties:{column:{type:"string"},operator:{type:"string"},value:{type:"string"}}}},logic:{type:"string",enum:["all","any"]}}}}),e))),(0,v.addFilter)("editor.BlockListBlock","mpg/contextual-indicators",h)})()})();